<!--/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    HTML
//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->

<template>

	<div ref="root" :class="['accordeon', {'open': isOpen}]">

		<!-- HEADER -->
		<div ref="header" class="accordeon-header" @click="toggleAccordeon">
			<h3>{{ header }}</h3>
			<div class="accordeon-header-icon desktop" @click.stop="toggleAccordeon">
				<svg-icon :icon="icon" :class="[{'active': isOpen}]"></svg-icon>
			</div>
		</div>

		<!-- CONTENT -->
		<div ref="content" class="accordeon-content-wrap">
			<div class="accordeon-content">
				<slot>

				</slot>
			</div>
		</div>

	</div>

</template>



<!--/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    JAVASCRIPT
//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->


	<script>

		import u from "umbrellajs";
		import gsap from 'gsap';

		export default {

			/////////////////////////////////
			// INIT
			/////////////////////////////////

			name: 'Accordeon',

			props: {
				header: 	{ type: String, required: true },
				icon: 		{ type: String, required: true },
				duration: 	{ type: Number, default: 0.3 }
			},

			data() {
				return {
					animation: undefined,
					isOpen: false,
				};
			},

			computed: {

			},


			/////////////////////////////////
			// EVENTS
			/////////////////////////////////

			created() {

			},

			mounted() {

				this.initAnimation();
			},


			/////////////////////////////////
			// METHODS
			/////////////////////////////////

			methods: {

				initAnimation() {

					this.animation = gsap.timeline({paused:true,onReverseComplete:(e) => { this.animation.invalidate(); }});
					this.animation.fromTo(this.$refs.content,{height:0},{duration:this.duration,height:'auto', ease:'power2.inOut'});
				},

				toggleAccordeon(e) {

					this.isOpen = !this.isOpen;
					this.animation.reversed(!this.isOpen).resume();
				},
			},


		}; // end export

	</script>



<!--/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//    STYLE
//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->


	<style lang="scss" scoped>

	</style>
